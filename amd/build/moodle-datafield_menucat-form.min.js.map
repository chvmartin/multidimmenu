{"version":3,"sources":["../src/moodle-datafield_menucat-form.js"],"names":["define","$","Ajax","init","on","secondlevel","thirdlevel","contentid","getAttribute","s","document","getElementById","t","input","console","log","value","attr","val","find","text","empty","Option","call","methodname","args","firstlevel","done","resp","Object","keys","length","forEach","element","options","secondlevelitem","id","thirdlevelitem"],"mappings":"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","sourcesContent":["define(['jquery', 'core/ajax'],\r\n    function($, Ajax, Str, ModalFactory, ModalEvents, Notification, CustomEvents, Templates) {\r\n        /**\r\n         * Init this module which allows activity completion state to be changed via ajax.\r\n         * @method init\r\n         * @param {string} fullName The current user's full name.\r\n         * @private\r\n         */\r\n        const init = function () {\r\n            // Register the click, space and enter events as activators for the trigger element.\r\n            $('#id_first_level').on(\"change\",function(event) {\r\n\r\n                var secondlevel = $('#id_second_level');\r\n\t\t\t\tvar thirdlevel = $('#id_third_level');\r\n\t            var contentid= this.getAttribute('contentid');\r\n                var s = document.getElementById('id_second_level');\r\n\t            var t = document.getElementById('id_third_level');\r\n\r\n\t\t\t\tvar input = $('#field_'+contentid);\r\n\t            console.log(this.value);\r\n                if (this.value) {\r\n                    $('#id_second_level').attr('disabled', false)\r\n\t                input.val('');\r\n\t                input.val($('#id_first_level').find(\":selected\").text());\r\n                } else {\r\n                    $('#id_second_level').attr('disabled', true)\r\n\t                secondlevel.empty()\r\n                    s[0] = new Option('Choose...',0);\r\n                    return\r\n                }\r\n                Ajax.call([{\r\n                    methodname: 'datafield_menucat_get_second_level',\r\n                    args: {firstlevel: this.value,contentid: contentid},\r\n                    done: function (resp) {\r\n\t                    secondlevel.empty();\r\n\t\t\t\t\t\tif (Object.keys(resp).length>0){\r\n\t\t\t\t\t\t\ts[0] = new Option('Choose...',0);\r\n\t\t\t\t\t\t\t$('#id_second_level').attr('disabled', false);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ts[0] = new Option('--',0);\r\n\t\t\t\t\t\t\t$('#id_second_level').attr('disabled', true);\r\n\t\t\t\t\t\t}\r\n\t                    thirdlevel.empty();\r\n\t                    t[0] = new Option('--',0);\r\n                        resp.forEach(function(element) {\r\n                            s[s.options.length] = new Option(element.secondlevelitem,element.id);\r\n                        });\r\n                    }\r\n                }]);\r\n            });\r\n\r\n\t        $('#id_second_level').on(\"change\",function(event) {\r\n\t\t        var firstlevel = $('#id_first_level').find(\":selected\").text();\r\n\t\t        var thirdlevel = $('#id_third_level');\r\n\t\t        var contentid= this.getAttribute('contentid');\r\n\t\t        var s = document.getElementById('id_third_level');\r\n\t\t        var input = $('#field_'+contentid);\r\n\r\n\t\t        if (this.value) {\r\n\t\t\t        $('#id_third_level').attr('disabled', false)\r\n\t\t\t        input.val('');\r\n\t\t\t        input.val($('#id_first_level').find(\":selected\").text()+'=>'+$('#id_second_level').find(\":selected\").text());\r\n\t\t        } else {\r\n\t\t\t        $('#id_third_level').attr('disabled', true)\r\n\t\t\t        thirdlevel.empty()\r\n\t\t\t        s[0] = new Option('Choose...',0);\r\n\t\t\t        return\r\n\t\t        }\r\n\t\t        Ajax.call([{\r\n\t\t\t        methodname: 'datafield_menucat_get_third_level',\r\n\t\t\t        args: {firstlevel:firstlevel ,secondlevel: this.value,contentid: contentid},\r\n\t\t\t        done: function (resp) {\r\n\t\t\t\t        thirdlevel.empty()\r\n\t\t\t\t        if (Object.keys(resp).length>0){\r\n\t\t\t\t\t        s[0] = new Option('Choose...',0);\r\n\t\t\t\t\t        $('#id_third_level').attr('disabled', false);\r\n\t\t\t\t        }else{\r\n\t\t\t\t\t        s[0] = new Option('--',0);\r\n\t\t\t\t\t        $('#id_third_level').attr('disabled', true);\r\n\t\t\t\t        }\r\n\t\t\t\t        resp.forEach(function(element) {\r\n\t\t\t\t\t        s[s.options.length] = new Option(element.thirdlevelitem,element.id);\r\n\t\t\t\t        });\r\n\t\t\t        }\r\n\t\t        }]);\r\n\t        });\r\n\t        $('#id_third_level').on(\"change\",function(event) {\r\n\t\t        var contentid= this.getAttribute('contentid');\r\n\t\t        var input = $('#field_'+contentid);\r\n\t\t        if (this.value) {\r\n\t\t\t        $('#id_third_level').attr('disabled', false)\r\n\t\t\t        input.val('');\r\n\t\t\t        input.val($('#id_first_level').find(\":selected\").text()+'=>'+$('#id_second_level').find(\":selected\").text()+'=>'+$('#id_third_level').find(\":selected\").text());\r\n\t\t        }\r\n\t        });\r\n        };\r\n\r\n        return {\r\n            init: init\r\n        };\r\n    });\r\n"],"file":"moodle-datafield_menucat-form.min.js"}